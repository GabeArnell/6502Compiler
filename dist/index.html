<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>Arnell Compiler</title>
    <!-- Bootstrap uses this module for opening dropdowns  https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js -->
    <script  src="js/bootstrap/popper.min.js"></script>
    <script  src="js/bootstrap/bootstrap.bundle.js"></script>

    <!-- Bootstrapping the CSS from: https://getbootstrap.com/docs/5.1/getting-started/download/-->

    <link rel= "stylesheet" href="css/bootstrap.min.css">

    <!-- JS Configuration and Static Settings -->
    <script src = "js/structures/Characters.js"></script>

    <!-- JS Class Templates -->
    <script src = "js/structures/Entity.js"></script>
    <script src = "js/structures/Tokens.js"></script>
    <script src = "js/structures/Lexer.js"></script>
    <script src = "js/structures/TreeClasses.js"></script>
    <script src = "js/structures/Parser.js"></script>

    <script src = "js/structures/Compiler.js"></script>
    
    <!-- JS Scripts -->
    <script src = "js/CompileCode.js"></script>
    <script src = "js/TestCases.js"></script>

</head>
<body>
    
      


<div style="margin-top: 4%;">
<!-- Text Area Containers-->
<div class="row g-2" style="margin-left: 4%;margin-right: 4%;">
    <div class="dropdown">
        <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
            Test Cases
        </a>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink" id = "testcasedropdown">
        </ul>
      </div>

    <div class = "col-md">
        <label>Source Code</label>
        <div class="form-floating p-3 mb-2 bg-transparent text-dark" style="size:50%">
            <textarea class="form-control" id="sourceCodeInput" style="height: 400px;resize:none" autofocus></textarea>
        </div>
    </div>

    <div class = "col-md">
        <label>Compiler Logging</label>
        <div class="form-floating p-3 mb-2 bg-transparent text-dark" style="size:50%">
            <textarea class="form-control"  id="compilerLogOutput" style="height: 400px;resize:none" readOnly></textarea>
        </div>
    </div>


</div>
<div style="size:50%;margin-left: 50%;">
    <button type="button" class="btn btn-primary btn-md" id = "compileButton" >Compile</button>
    <button type="button" class="btn btn-danger btn-md" id = "clearButton" style="margin-left: 20%;">Clear</button>    
</div>

<div class="form-floating p-3 mb-2 bg-transparent text-dark" style="size:50%; margin-left: 10%; margin-right: 10%;">
    <textarea class="form-control" id="machineCodeOutput" style="height: 300px;resize:none"></textarea>
</div>



</div>

<script>

    // Triggers the Compilier Process
    document.getElementById("compileButton").onclick = initiateCompiler // function in CompileCode script
    
    document.getElementById("clearButton").onclick = ()=>{
        document.getElementById("compilerLogOutput").value = ""
        document.getElementById("machineCodeOutput").value = ""
    }

    let dropdownHolder = document.getElementById("testcasedropdown")
    for (let test in TEST_CASES){
        let option = document.createElement('li');
        option.innerHTML=`<a class="dropdown-item" href="#" id = "${test}-test" >${test}</a>`
        dropdownHolder.appendChild(option)
        option.onclick =()=>{
            console.log(test)
            document.getElementById("sourceCodeInput")['value'] = TEST_CASES[test]
        }
    }
</script>

</body>
</html>